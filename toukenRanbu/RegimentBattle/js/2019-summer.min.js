var rewards=[{amount:2e5,reward:"北谷菜切",highlight:!0},{amount:15e4,reward:"手紙一式",highlight:""},{amount:145e3,reward:"旅道具",highlight:""},{amount:14e4,reward:"旅装束",highlight:""},{amount:135e3,reward:"御札˙富士",highlight:""},{amount:13e4,reward:"玉鋼 × 3000",highlight:""},{amount:125e3,reward:"砥石 × 3000",highlight:""},{amount:12e4,reward:"冷却材 × 3000",highlight:""},{amount:115e3,reward:"木炭 × 3000",highlight:""},{amount:11e4,reward:"手伝い札 × 5",highlight:""},{amount:105e3,reward:"依頼札 × 3",highlight:""},{amount:1e5,reward:"北谷菜切",highlight:!0},{amount:95e3,reward:"蘇言機",highlight:""},{amount:9e4,reward:"手紙一式",highlight:""},{amount:85e3,reward:"手伝い札 × 2",highlight:""},{amount:8e4,reward:"巴形薙刀",highlight:!0},{amount:75e3,reward:"玉鋼 × 1500",highlight:""},{amount:7e4,reward:"旅道具",highlight:""},{amount:67500,reward:"砥石 × 1500",highlight:""},{amount:65e3,reward:"冷却材 × 1500",highlight:""},{amount:62500,reward:"木炭 × 1500",highlight:""},{amount:6e4,reward:"旅装束",highlight:""},{amount:57500,reward:"兵糧丸",highlight:""},{amount:55e3,reward:"銃兵˙特上",highlight:""},{amount:52500,reward:"三倍魚籠",highlight:!0},{amount:5e4,reward:"浦島虎徹",highlight:!0},{amount:47500,reward:"投石兵˙特上",highlight:""},{amount:45e3,reward:"手紙一式",highlight:""},{amount:42500,reward:"弓兵˙特上",highlight:""},{amount:4e4,reward:"兵糧丸",highlight:""},{amount:37500,reward:"旅道具",highlight:""},{amount:35e3,reward:"御札˙松",highlight:""},{amount:32500,reward:"盾兵˙特上",highlight:""},{amount:3e4,reward:"旅装束",highlight:""},{amount:27500,reward:"青毛",highlight:""},{amount:25e3,reward:"兵糧丸",highlight:""},{amount:22500,reward:"槍兵˙特上",highlight:""},{amount:2e4,reward:"御札˙竹",highlight:""},{amount:18e3,reward:"精鋭兵˙特上",highlight:""},{amount:16e3,reward:"仙人団子",highlight:""},{amount:14e3,reward:"重騎兵˙特上",highlight:""},{amount:12e3,reward:"御札˙梅",highlight:""},{amount:1e4,reward:"采配",highlight:""},{amount:9e3,reward:"玉鋼 × 1000",highlight:""},{amount:8e3,reward:"砥石 × 1000",highlight:""},{amount:7e3,reward:"冷却材 × 1000",highlight:""},{amount:6e3,reward:"木炭 × 1000",highlight:""},{amount:5e3,reward:"三倍魚籠",highlight:!0},{amount:4e3,reward:"遠征呼び戻し鳩",highlight:""},{amount:3e3,reward:"鹿毛",highlight:""},{amount:2e3,reward:"重歩兵˙特上",highlight:""},{amount:1e3,reward:"手伝い札",highlight:""},{amount:750,reward:"軽騎兵˙特上",highlight:""},{amount:500,reward:"御札˙水砲",highlight:""},{amount:300,reward:"軽歩兵˙特上",highlight:""},{amount:100,reward:"三倍魚籠",highlight:!0},{amount:30,reward:"兵糧丸",highlight:""}],period={startDate:"2019-07-30",endDate:"2019-08-27"},currentAmountEl=$("#currentAmount"),rewardProgressEl=$("#rewardProgress"),highlightCookie=$.cookie("toukenRanbuRegimentBattleHLArray"),highlightCookieArray=[];if(null==highlightCookie){var highlightArray=[];$.each(rewards,function(a,t){1==t.highlight&&highlightArray.push(t.amount)}),highlightCookieArray=highlightArray,$.cookie("toukenRanbuRegimentBattleHLArray",highlightCookieArray,{expires:30})}else highlightCookieArray=highlightCookie.split(","),$.each(highlightCookieArray,function(a,t){highlightCookieArray[a]=parseInt(t)});function createList(){var a=currentAmountEl.val(),t=getDiffDays();$.each(rewards,function(h,i){var e=i.amount,r=getNumbers(e,a,t),g='<li class="progress mb-3 d-flex'+(highlightCookieArray.includes(i.amount)?" hl":"")+'" data-target="'+e+'"><div class="progress-bar pt-1 pb-1" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: '+r.percentage+'%;"><span class="text"><sup class="mr-1">'+numberWithCommas(e)+"</sup>"+i.reward+" <sub> / "+r.percentage+'%</sub></span></div><div class="daily">'+r.dailyText+"</div></li>";rewardProgressEl.append(g)}),$("li",rewardProgressEl).click(function(){$(this).toggleClass("hl");var a=$(this).data("target");highlightCookieArray.includes(a)?highlightCookieArray.pop(a):highlightCookieArray.push(a),$.cookie("toukenRanbuRegimentBattleHLArray",highlightCookieArray,{expires:30})})}function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function getDiffDays(){var a=new Date,t=new Date(period.endDate),h=Math.abs(t.getTime()-a.getTime());return Math.ceil(h/864e5)-1}function getNumbers(a,t,h){var i=Math.round(t/a*100);i=i>100?100:i;var e=Math.floor((a-t)/h);return{percentage:i,dailyText:e>0?"每天至少需 "+numberWithCommas(e)+" 貝":'<span class="text-white">Get!</span>'}}$.each(period,function(a,t){$("#"+a).text(t)}),currentAmountEl.val($.cookie("toukenRanbuRegimentBattleAmount")),createList(),currentAmountEl.change(function(){var a=$(this).val(),t=getDiffDays();$.each(rewards,function(h,i){var e=i.amount,r=getNumbers(e,a,t),g=$('.progress[data-target="'+e+'"]');$(".progress-bar",g).css("width",r.percentage+"%"),$(".text sub",g).text(r.percentage+"%"),$(".daily",g).html(r.dailyText)}),$.cookie("toukenRanbuRegimentBattleAmount",a,{expires:30})}),$("#addAmount").change(function(){var a=""==currentAmountEl.val()?0:parseInt(currentAmountEl.val()),t=parseInt($(this).val())+a;currentAmountEl.val(t),currentAmountEl.trigger("change"),$(this).val("")});